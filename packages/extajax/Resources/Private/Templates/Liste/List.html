<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      data-namespace-typo3-fluid="true">
{namespace t=Helhum\TyposcriptRendering\ViewHelpers}

<f:layout name="Default" />

This template is responsible for creating a table of domain objects.

If you modify this template, do not forget to change the overwrite settings
in /Configuration/ExtensionBuilder/settings.yaml:
  Resources:
    Private:
      Templates:
        Liste:
          List.html: keep

Otherwise your changes will be overwritten the next time you save the extension in the extension builder

<f:section name="content">
    <h1>Listing for Liste</h1>

    <f:flashMessages />

    <table class="tx_extajax">
        <tr>
            <th><f:translate key="tx_extajax_domain_model_liste.title" /></th>
            <th><f:translate key="tx_extajax_domain_model_liste.text" /></th>
            <th></th>
            <th></th>
        </tr>
        <f:for each="{listes}" as="liste">
            <tr>
                <td><f:link.action action="show" arguments="{liste : liste}">{liste.title}</f:link.action></td>
                <td><f:link.action action="show" arguments="{liste : liste}">{liste.text}</f:link.action></td>
                <td><f:link.action action="edit" arguments="{liste : liste}">Edit</f:link.action></td>
                <td><f:link.action action="delete" arguments="{liste : liste}">Delete</f:link.action></td>
            </tr>
        </f:for>
    </table>

    <f:asset.script identifier="test">
    function test(el) {

      fetch(el.getAttribute('data-ajaxuri'), {
        method: 'GET',
      })

        .then(response => {
          console.log(response);
          return response.json();
        })
        .then(data => console.log(data))
        .catch((error) => console.error('Error:', error));

    }
    </f:asset.script>

    <button onclick="test(this)" data-ajaxuri="{t:uri.ajaxAction(action: 'ajaxCall', format: 'json', controller: 'Liste') -> f:format.htmlentities()}">Test</button>
</f:section>

</html>
